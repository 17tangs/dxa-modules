buildscript {
    repositories {
        mavenLocal()
    }
    //noinspection GroovyAssignabilityCheck
    dependencies {
        classpath group: 'com.sdl.dxa', name: 'dxa-builder', version: '1.6.0-SNAPSHOT'
    }
}

apply plugin: 'com.sdl.dxa.builder'

defaultTasks 'buildModules'

task wrapper(type: Wrapper) {
    gradleVersion = '2.9'
    distributionUrl = "https://services.gradle.org/distributions/gradle-$gradleVersion-all.zip"
}

task help(dependsOn: 'maven.help') << {
    println "Builds ${maven.projects}"
}

task buildModules(dependsOn: 'maven.run') << {
    println "Build for DXA Modules"
}

task build(dependsOn: 'buildModules')

if (project.hasProperty('command')) {
    maven.command = project.command
}
maven.projects = [
        ["dxa-module-smarttarget-abstract"],
        [
                "dxa-bom-modules",
                "dxa-module-cid",
                "dxa-module-core",
                "dxa-module-googleanalytics",
                "dxa-module-mediamanager",
                "dxa-module-search",
                "dxa-module-51degrees",
                "dxa-module-context-expressions",
                "dxa-module-test",
                "dxa-module-smarttarget-2013sp1",
                "dxa-module-smarttarget-web8"
        ]
]